<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>String operations</title>
</head>
<body>
<form>
    <div>
        <label>Input text:</label>
        <input type="text" name="text">
    </div>
    <div>
        <button name="reverse" value="reverse">Reverse string</button>
        <button name="hash" value="hash">Hash</button>
    </div>
</form>

<div id="result"></div>

<script>

    [].slice.call(document.querySelectorAll('button')).forEach(function (button) {
        button.addEventListener('click', function (e) {
            var resultDiv = document.querySelector('#result');
            var textInput = document.querySelector('input[type=text]');
            var xhr       = new XMLHttpRequest();
            var data      = 'text=' + encodeURIComponent(textInput.value) + '&' + button.name + '=' + button.value;

            resultDiv.innerHTML = '<img src="magic.gif">';

            xhr.open('post', '/modify-string');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send(data);

            xhr.addEventListener('readystatechange', function () {
                if (this.readyState === 4) {
                    var response = this.responseText;

                    window.setTimeout(function () {
                        resultDiv.textContent = response;
                    }, 1500);
                }
            });

            e.preventDefault();
        });
    });
</script>
</body>
</html>